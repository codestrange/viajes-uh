{% extends "navbar.html" %}
{% block subtitle %} - Viaje{% endblock subtitle %}
{% block page_content %}
<div class="row">
    <div class="col-8">
        <span class="mb-0 h1">{{ travel.name }}</span>
    </div>
    <div class="col-4">
        <div class="row">
            <div class="col-12">
                {% if travel.accepted %}
                    <span class="badge badge-pill badge-success w-100 mr-2"><strong>Estado:</strong> Aceptado</span>
                {% elif travel.rejected %}
                    <span class="badge badge-pill badge-danger w-100 mr-2"><strong>Estado:</strong> Rechazado</span>
                {% else %}
                <span class="badge badge-pill badge-info w-100 mr-2"><strong>Estado:</strong> En Proceso</span>
                {% endif %}
            </div>
        </div>
        <div class="row">
            <div class="col-6">
                <span class="badge badge-pill badge-dark mt-1 w-100"><strong>Salida:</strong> {{ travel.departure_date }}
                    <i class="fas fa-calendar-alt"></i>
                </span>
                <span class="badge badge-pill badge-dark mt-1 w-100"><strong>Duración:</strong> {{ travel.duration }} días</span>
            </div>
            <div class="col-6">
                <span class="badge badge-pill badge-dark mt-1 w-100"><strong>Concepto:</strong> {{ travel.concept }}</span>
                <span class="badge badge-pill badge-dark mt-1 w-100"><strong>Destino:</strong> {{ travel.country }}</span>
            </div>
        </div>
    </div>
</div>
<hr>
<div class="row">
    <div class="col-12">
        <div class="card mb-2">
            <div class="card-header"><strong>Documentos</strong></div>
            <div class="card-body">
                {% for document in travel.documents %}
                    <div class="row mb-1">
                        <div class="col-10">
                            {% if document.confirmed %}
                            <a href="{{ url_for('static', filename=document.path) }}" class="btn btn-block btn-outline-success">{{ document.name }}
                                <span class="badge badge-pill badge-success">Confirmado</span>
                            </a>
                            {% else %}
                            <a href="{{ url_for('static', filename=document.path) }}" class="btn btn-block btn-outline-danger">{{ document.name }}
                                <span class="badge badge-pill badge-danger">No Confirmado</span>
                            </a>
                            {% endif %}
                        </div>
                        <div class="col-2">
                            <a href="{{ url_for('document.edit', id=document.id) }}" class="btn btn-block btn-outline-dark">Editar</a>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
        {% if requirements %}
        <div class="card mb-2">
            <div class="card-header"><strong>Requisitos que necesita el viaje:</strong> 
                {% for requirement in requirements %}
                {{ requirement.name }}{% if loop.index != loop.length %}, {% endif %}
                {% endfor %}
            </div>
        </div>
        {% endif %}
        <div class="card mb-2">
            <div class="card-header h4"><strong>Escribir comentario</strong></div>
            <form method="POST">
                {{ form.csrf_token }}
                <div class="card-body">
                    {{ form.text(class="form-control") }}
                </div>
                <div class="card-footer">
                    {{ form.submit(class="btn btn-outline-dark btn-block") }}
                </div>
            </form>
        </div>
        {% if travel.comments.first() %}
        <div class="card mb-2">
            <div class="card-header h4"><strong>Comentario</strong></div>
        </div>
        {% for comment in travel.comments %}
        <div class="card mb-2">
            <div class="card-body"><strong>{% if comment.user.id == current_user.id %}Yo{% else %}{{ comment.user }}{% endif %}:</strong> {{ comment.text }}</div>
        </div>
        {% endfor %}
        {% endif %}
    </div>
    <div class="mb-3">&nbsp;</div>
</div>
{% endblock page_content %}